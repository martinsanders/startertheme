CallToActionTV.combo.CallToActionTV=function(t){t=t||{},Ext.applyIf(t,{xtype:"panel",layout:"column",autoHeight:!0,border:!1,width:800,items:[{xtype:"panel",autoWidth:!0,layout:"form",labelAlign:"top",border:!1,items:[new Ext.form.ComboBox({labelStyle:"padding-top:5px",fieldLabel:_("calltoactiontv.type"),name:"tv"+t.tvId+"-type",id:"tv"+t.tvId+"-type",value:t.type,triggerAction:"all",mode:"local",store:new Ext.data.ArrayStore({id:0,fields:["value","text"],data:t.typeOptions}),valueField:"value",displayField:"text",listeners:{change:{fn:this.ctaTypeOnChange,scope:this}}})]},{xtype:"panel",autoWidth:!0,layout:"form",labelAlign:"top",border:!1,items:[new Ext.form.ComboBox({labelStyle:"padding-top:5px",fieldLabel:_("calltoactiontv.value"),name:"tv"+t.tvId+"-resource",id:"tv"+t.tvId+"-resource",value:t.resource,triggerAction:"all",typeAhead:!0,mode:"local",store:new Ext.data.ArrayStore({id:0,fields:["value","text"],data:t.resourceOptions}),valueField:"value",displayField:"text",listeners:{change:{fn:this.ctaOnChange,scope:this}}})]},{xtype:"panel",autoWidth:!0,layout:"form",labelAlign:"top",border:!1,items:[new Ext.form.TextField({labelStyle:"padding-top:5px",fieldLabel:_("calltoactiontv.value"),name:"tv"+t.tvId+"-value",id:"tv"+t.tvId+"-value",value:t.value,listeners:{change:{fn:this.ctaOnChange,scope:this}}}),{id:"tv"+t.tvId+"-value-help",cls:"calltoactiontv-help",html:_("calltoactiontv.external_placeholder"),xtype:"panel",autoWidth:!0}]},{xtype:"panel",autoWidth:!0,layout:"form",labelAlign:"top",border:!1,items:[new Ext.form.TextField({labelStyle:"padding-top:5px",fieldLabel:_("calltoactiontv.text"),name:"tv"+t.tvId+"-text",id:"tv"+t.tvId+"-text",value:t.text,listeners:{change:{fn:this.ctaOnChange,scope:this}}}),{id:"tv"+t.tvId+"-text-help",cls:"calltoactiontv-help",html:_("calltoactiontv.text_placeholder"),xtype:"panel",autoWidth:!0}]},{xtype:"panel",autoWidth:!0,layout:"form",labelAlign:"top",border:!1,items:[new Ext.form.ComboBox({labelStyle:"padding-top:5px",fieldLabel:_("calltoactiontv.style"),name:"tv"+t.tvId+"-style",id:"tv"+t.tvId+"-style",value:t.style,triggerAction:"all",mode:"local",store:new Ext.data.ArrayStore({id:0,fields:["value","text"],data:t.styleOptions}),valueField:"value",displayField:"text",listeners:{beforerender:{fn:this.ctaBeforeRender,scope:this},change:{fn:this.ctaOnChange,scope:this},afterrender:{fn:this.ctaAfterRender,scope:this}}})]}]}),CallToActionTV.combo.CallToActionTV.superclass.constructor.call(this,t)},Ext.extend(CallToActionTV.combo.CallToActionTV,MODx.Panel,{ctaTypeOnChange:function(){Ext.getCmp("tv"+this.tvId+"-value").setValue(""),this.ctaOnChange()},ctaOnChange:function(){this.setTVValue(),this.ctaToggle(),MODx.fireResourceFormChange()},ctaAfterRender:function(){this.setTVValue()},setTVValue:function(){var t={type:Ext.getCmp("tv"+this.tvId+"-type").getValue(),value:Ext.getCmp("tv"+this.tvId+"-value").getValue(),style:Ext.getCmp("tv"+this.tvId+"-style").getValue(),text:Ext.getCmp("tv"+this.tvId+"-text").getValue(),resource:Ext.getCmp("tv"+this.tvId+"-resource").getValue()};Ext.get("tv"+this.tvId).set({value:Ext.encode(t)})},ctaBeforeRender:function(){0===this.styleOptions.length&&Ext.getCmp("tv"+this.tvId+"-style").hide(),this.ctaToggle()},ctaToggle:function(){var t=Ext.getCmp("tv"+this.tvId+"-type").getValue(),e=Ext.getCmp("tv"+this.tvId+"-value"),l=Ext.getCmp("tv"+this.tvId+"-value-help"),a=Ext.getCmp("tv"+this.tvId+"-resource");"resource"===t&&(e.hide(),l.hide(),a.show()),"external"===t&&(e.show(),l.show(),a.hide(),l.update(_("calltoactiontv.external_placeholder"))),"mailto"===t&&(e.show(),l.show(),a.hide(),l.update(_("calltoactiontv.mailto_placeholder"))),"tel"===t&&(e.show(),l.show(),a.hide(),l.update(_("calltoactiontv.tel_placeholder")))}}),Ext.reg("calltoactiontv-combo-calltoactiontv",CallToActionTV.combo.CallToActionTV);