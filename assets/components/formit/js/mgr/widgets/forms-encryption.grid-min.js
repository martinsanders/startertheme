FormIt.grid.FormsEncryption=function(r){r=r||{},Ext.applyIf(r,{id:"formit-grid-forms-encryption",url:FormIt.config.connectorUrl,baseParams:{action:"mgr/form/getlistsingle"},fields:["form","encrypted","total"],autoHeight:!0,paging:!0,remoteSort:!0,columns:[{header:_("formit.form"),dataIndex:"form"},{header:_("formit.encrypted"),dataIndex:"encrypted",width:250},{header:_("formit.total"),dataIndex:"total",width:250}]}),FormIt.grid.FormsEncryption.superclass.constructor.call(this,r)},Ext.extend(FormIt.grid.FormsEncryption,MODx.grid.Grid,{windows:{},getMenu:function(){var r=[];FormIt.config.opensslAvailable&&void 0!==this.menu.record.encrypted&&void 0!==this.menu.record.total&&this.menu.record.encrypted<this.menu.record.total&&r.push({text:_("formit.form_encryptall"),handler:this.encryptAll}),void 0!==this.menu.record.encrypted&&this.menu.record.encrypted>0&&r.push({text:_("formit.form_decryptall"),handler:this.decryptAll}),r.length>0&&this.addContextMenuItem(r)},encryptAll:function(r,t){if(!this.menu.record)return!1;MODx.msg.confirm({title:_("formit.form_encrypt"),text:_("formit.form_encrypt_confirm"),url:FormIt.config.connectorUrl,params:{action:"mgr/form/encrypt",form:this.menu.record.form},listeners:{success:{fn:function(r){this.refresh()},scope:this}}})},decryptAll:function(r,t){if(!this.menu.record)return!1;MODx.msg.confirm({title:_("formit.form_decrypt"),text:_("formit.form_decrypt_confirm"),url:FormIt.config.connectorUrl,params:{action:"mgr/form/decrypt",form:this.menu.record.form},listeners:{success:{fn:function(r){this.refresh()},scope:this}}})}}),Ext.reg("formit-grid-forms-encryption",FormIt.grid.FormsEncryption);